<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>카카오맵 클릭 위치 주소 표시</title>
  <style>
    #map { width: 100%; height: 500px; }
    #info { padding: 10px; background: #f5f5f5; }
  </style>
</head>
<body>
  <div id="info">
    📍 <span id="coords">위도: -, 경도: -</span><br>
    🏠 <span id="address">주소: -</span>
  </div>
  <div id="map"></div>

  <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=c543ee5ba7572b86f82336d8d7056630&libraries=services"></script>
  <script>
    const mapContainer = document.getElementById('map');
    const mapOption = {
      center: new kakao.maps.LatLng(37.5665, 126.9780), // 서울 시청 기준
      level: 3
    };

    const map = new kakao.maps.Map(mapContainer, mapOption);
    
    // 일반 지도와 스카이뷰로 지도 타입을 전환할 수 있는 지도타입 컨트롤을 생성합니다
    var mapTypeControl = new kakao.maps.MapTypeControl();

    // 지도에 컨트롤을 추가해야 지도위에 표시됩니다
    // kakao.maps.ControlPosition은 컨트롤이 표시될 위치를 정의하는데 TOPRIGHT는 오른쪽 위를 의미합니다
    map.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPRIGHT);

    
    const geocoder = new kakao.maps.services.Geocoder();

    const marker = new kakao.maps.Marker();
    
    kakao.maps.event.addListener(map, 'click', function(mouseEvent) {
      const latlng = mouseEvent.latLng;

      // 마커 위치 설정
      marker.setMap(map);
      marker.setPosition(latlng);

      // 위도/경도 출력
      document.getElementById('coords').textContent =
        `위도: ${latlng.getLat().toFixed(8)}, 경도: ${latlng.getLng().toFixed(8)}`;

      // 주소 요청
      geocoder.coord2Address(latlng.getLng(), latlng.getLat(), function(result, status) {
        if (status === kakao.maps.services.Status.OK) {
          const address = result[0].address?.address_name || '주소 없음';
          document.getElementById('address').textContent = `주소: ${address}`;
        }
      });
    });
  </script>
</body>
</html>
